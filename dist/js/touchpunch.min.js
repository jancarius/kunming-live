(function(n){function c(){var n=f();n!==o&&(o=n,u.trigger("orientationchange"))}function i(t,i,r,u){var f=r.type;r.type=i;n.event.dispatch.call(t,r,u);r.type=f}var r,t,u,d,f,o,s,h,e;if(n.attrFn=n.attrFn||{},r="ontouchstart"in window,t={tap_pixel_range:5,swipe_h_threshold:50,swipe_v_threshold:50,taphold_threshold:750,doubletap_int:500,touch_capable:r,orientation_support:"orientation"in window&&"onorientationchange"in window,startevent:r?"touchstart":"mousedown",endevent:r?"touchend":"mouseup",moveevent:r?"touchmove":"mousemove",tapevent:r?"tap":"click",scrollevent:r?"touchmove":"scroll",hold_timer:null,tap_timer:null},n.isTouchCapable=function(){return t.touch_capable},n.getStartEvent=function(){return t.startevent},n.getEndEvent=function(){return t.endevent},n.getMoveEvent=function(){return t.moveevent},n.getTapEvent=function(){return t.tapevent},n.getScrollEvent=function(){return t.scrollevent},n.each(["tapstart","tapend","tapmove","tap","tap2","tap3","tap4","singletap","doubletap","taphold","swipe","swipeup","swiperight","swipedown","swipeleft","swipeend","scrollstart","scrollend","orientationchange"],function(t,i){n.fn[i]=function(n){return n?this.on(i,n):this.trigger(i)};n.attrFn[i]=!0}),n.event.special.tapstart={setup:function(){function f(n){if(n.originalEvent){if(n.which&&n.which!==1)return!1;var f=n.originalEvent,e={position:{x:t.touch_capable?f.touches[0].screenX:n.screenX,y:t.touch_capable?f.touches[0].screenY:n.screenY},offset:{x:t.touch_capable?Math.round(f.changedTouches[0].pageX-(r.offset()?r.offset().left:0)):Math.round(n.pageX-(r.offset()?r.offset().left:0)),y:t.touch_capable?Math.round(f.changedTouches[0].pageY-(r.offset()?r.offset().top:0)):Math.round(n.pageY-(r.offset()?r.offset().top:0))},time:Date.now(),target:n.target};return i(u,"tapstart",n,e),!0}}var u=this,r=n(u);r.on(t.startevent,r.data.tapStartFunc=f)},remove:function(){n(this).off(t.startevent,n(this).data.tapStartFunc)}},n.event.special.tapmove={setup:function(){function f(n){if(n.originalEvent){var f=n.originalEvent,e={position:{x:t.touch_capable?f.touches[0].screenX:n.screenX,y:t.touch_capable?f.touches[0].screenY:n.screenY},offset:{x:t.touch_capable?Math.round(f.changedTouches[0].pageX-(r.offset()?r.offset().left:0)):Math.round(n.pageX-(r.offset()?r.offset().left:0)),y:t.touch_capable?Math.round(f.changedTouches[0].pageY-(r.offset()?r.offset().top:0)):Math.round(n.pageY-(r.offset()?r.offset().top:0))},time:Date.now(),target:n.target};return i(u,"tapmove",n,e),!0}}var u=this,r=n(u);r.on(t.moveevent,r.data.tapMoveFunc=f)},remove:function(){n(this).off(t.moveevent,n(this).data.tapMoveFunc)}},n.event.special.tapend={setup:function(){function f(n){if(n.originalEvent){var f=n.originalEvent,e={position:{x:t.touch_capable?f.changedTouches[0].screenX:n.screenX,y:t.touch_capable?f.changedTouches[0].screenY:n.screenY},offset:{x:t.touch_capable?Math.round(f.changedTouches[0].pageX-(r.offset()?r.offset().left:0)):Math.round(n.pageX-(r.offset()?r.offset().left:0)),y:t.touch_capable?Math.round(f.changedTouches[0].pageY-(r.offset()?r.offset().top:0)):Math.round(n.pageY-(r.offset()?r.offset().top:0))},time:Date.now(),target:n.target};return i(u,"tapend",n,e),!0}}var u=this,r=n(u);r.on(t.endevent,r.data.tapEndFunc=f)},remove:function(){n(this).off(t.endevent,n(this).data.tapEndFunc)}},n.event.special.taphold={setup:function(){function h(n){var c,a;if(n.originalEvent){if(n.which&&n.which!==1)return!1;r.data("tapheld",!1);s=n.target;var h=n.originalEvent,l=Date.now(),v={x:t.touch_capable?h.touches[0].screenX:n.screenX,y:t.touch_capable?h.touches[0].screenY:n.screenY},y={x:t.touch_capable?h.touches[0].pageX-h.touches[0].target.offsetLeft:n.offsetX,y:t.touch_capable?h.touches[0].pageY-h.touches[0].target.offsetTop:n.offsetY};return u.x=n.originalEvent.targetTouches?n.originalEvent.targetTouches[0].pageX:n.pageX,u.y=n.originalEvent.targetTouches?n.originalEvent.targetTouches[0].pageY:n.pageY,f=u.x,e=u.y,c=r.parent().data("threshold")?r.parent().data("threshold"):r.data("threshold"),a=typeof c!="undefined"&&c!==!1&&parseInt(c)?parseInt(c):t.taphold_threshold,t.hold_timer=window.setTimeout(function(){var c=u.x-f,a=u.y-e;if(n.target==s&&(u.x==f&&u.y==e||c>=-t.tap_pixel_range&&c<=t.tap_pixel_range&&a>=-t.tap_pixel_range&&a<=t.tap_pixel_range)){r.data("tapheld",!0);var p=Date.now(),w={x:t.touch_capable?h.touches[0].screenX:n.screenX,y:t.touch_capable?h.touches[0].screenY:n.screenY},b={x:t.touch_capable?Math.round(h.changedTouches[0].pageX-(r.offset()?r.offset().left:0)):Math.round(n.pageX-(r.offset()?r.offset().left:0)),y:t.touch_capable?Math.round(h.changedTouches[0].pageY-(r.offset()?r.offset().top:0)):Math.round(n.pageY-(r.offset()?r.offset().top:0))},k=p-l,d={startTime:l,endTime:p,startPosition:v,startOffset:y,endPosition:w,endOffset:b,duration:k,target:n.target};i(o,"taphold",n,d)}},a),!0}}function c(){r.data("tapheld",!1);window.clearTimeout(t.hold_timer)}function l(n){n.originalEvent&&(f=n.originalEvent.targetTouches?n.originalEvent.targetTouches[0].pageX:n.pageX,e=n.originalEvent.targetTouches?n.originalEvent.targetTouches[0].pageY:n.pageY)}var o=this,r=n(o),s,u={x:0,y:0},f=0,e=0;r.on(t.startevent,r.data.tapHoldFunc1=h).on(t.endevent,r.data.tapHoldFunc2=c).on(t.moveevent,r.data.tapHoldFunc3=l)},remove:function(){n(this).off(t.startevent,n(this).data.tapHoldFunc1).off(t.endevent,n(this).data.tapHoldFunc2).off(t.moveevent,n(this).data.tapHoldFunc3)}},n.event.special.doubletap={setup:function(){function l(i){if(i.originalEvent)return i.which&&i.which!==1?!1:(r.data("doubletapped",!1),h=i.target,f=i.originalEvent,u||(u={position:{x:t.touch_capable?f.touches[0].screenX:i.screenX,y:t.touch_capable?f.touches[0].screenY:i.screenY},offset:{x:t.touch_capable?Math.round(f.changedTouches[0].pageX-(r.offset()?r.offset().left:0)):Math.round(i.pageX-(r.offset()?r.offset().left:0)),y:t.touch_capable?Math.round(f.changedTouches[0].pageY-(r.offset()?r.offset().top:0)):Math.round(i.pageY-(r.offset()?r.offset().top:0))},time:Date.now(),target:i.target,element:i.originalEvent.srcElement,index:n(i.target).index()}),!0)}function a(h){var a,y;if(h.originalEvent){var l=Date.now(),p=r.data("lastTouch")||l+1,v=l-p;window.clearTimeout(e);v<t.doubletap_int&&n(h.target).index()==u.index&&v>100?(r.data("doubletapped",!0),window.clearTimeout(t.tap_timer),a={position:{x:t.touch_capable?h.originalEvent.changedTouches[0].screenX:h.screenX,y:t.touch_capable?h.originalEvent.changedTouches[0].screenY:h.screenY},offset:{x:t.touch_capable?Math.round(f.changedTouches[0].pageX-(r.offset()?r.offset().left:0)):Math.round(h.pageX-(r.offset()?r.offset().left:0)),y:t.touch_capable?Math.round(f.changedTouches[0].pageY-(r.offset()?r.offset().top:0)):Math.round(h.pageY-(r.offset()?r.offset().top:0))},time:Date.now(),target:h.target,element:h.originalEvent.srcElement,index:n(h.target).index()},y={firstTap:u,secondTap:a,interval:a.time-u.time},o||(i(s,"doubletap",h,y),u=null),o=!0,c=window.setTimeout(function(){o=!1},t.doubletap_int)):(r.data("lastTouch",l),e=window.setTimeout(function(){u=null;window.clearTimeout(e)},t.doubletap_int,[h]));r.data("lastTouch",l)}}var s=this,r=n(s),h,e,u=null,f,c,o=!1;r.on(t.startevent,r.data.doubleTapFunc1=l).on(t.endevent,r.data.doubleTapFunc2=a)},remove:function(){n(this).off(t.startevent,n(this).data.doubleTapFunc1).off(t.endevent,n(this).data.doubleTapFunc2)}},n.event.special.singletap={setup:function(){function s(n){if(n.originalEvent)return n.which&&n.which!==1?!1:(o=Date.now(),e=n.target,u.x=n.originalEvent.targetTouches?n.originalEvent.targetTouches[0].pageX:n.pageX,u.y=n.originalEvent.targetTouches?n.originalEvent.targetTouches[0].pageY:n.pageY,!0)}function h(n){if(n.originalEvent&&n.target==e){var s=n.originalEvent.changedTouches?n.originalEvent.changedTouches[0].pageX:n.pageX,h=n.originalEvent.changedTouches?n.originalEvent.changedTouches[0].pageY:n.pageY;t.tap_timer=window.setTimeout(function(){var l=u.x-s,a=u.y-h,e,c;r.data("doubletapped")||r.data("tapheld")||!(u.x==s&&u.y==h||l>=-t.tap_pixel_range&&l<=t.tap_pixel_range&&a>=-t.tap_pixel_range&&a<=t.tap_pixel_range)||(e=n.originalEvent,c={position:{x:t.touch_capable?e.changedTouches[0].screenX:n.screenX,y:t.touch_capable?e.changedTouches[0].screenY:n.screenY},offset:{x:t.touch_capable?Math.round(e.changedTouches[0].pageX-(r.offset()?r.offset().left:0)):Math.round(n.pageX-(r.offset()?r.offset().left:0)),y:t.touch_capable?Math.round(e.changedTouches[0].pageY-(r.offset()?r.offset().top:0)):Math.round(n.pageY-(r.offset()?r.offset().top:0))},time:Date.now(),target:n.target},c.time-o<t.taphold_threshold&&i(f,"singletap",n,c))},t.doubletap_int)}}var f=this,r=n(f),e=null,o=null,u={x:0,y:0};r.on(t.startevent,r.data.singleTapFunc1=s).on(t.endevent,r.data.singleTapFunc2=h)},remove:function(){n(this).off(t.startevent,n(this).data.singleTapFunc1).off(t.endevent,n(this).data.singleTapFunc2)}},n.event.special.tap={setup:function(){function c(n){if(n.originalEvent)return n.which&&n.which!==1?!1:(e=!0,u.x=n.originalEvent.targetTouches?n.originalEvent.targetTouches[0].pageX:n.pageX,u.y=n.originalEvent.targetTouches?n.originalEvent.targetTouches[0].pageY:n.pageY,s=Date.now(),o=n.target,h=n.originalEvent.targetTouches?n.originalEvent.targetTouches:[n],!0)}function l(n){var l,a,c,b;if(n.originalEvent){var v=n.originalEvent.targetTouches?n.originalEvent.changedTouches[0].pageX:n.pageX,y=n.originalEvent.targetTouches?n.originalEvent.changedTouches[0].pageY:n.pageY,p=u.x-v,w=u.y-y;if(o==n.target&&e&&Date.now()-s<t.taphold_threshold&&(u.x==v&&u.y==y||p>=-t.tap_pixel_range&&p<=t.tap_pixel_range&&w>=-t.tap_pixel_range&&w<=t.tap_pixel_range)){for(l=n.originalEvent,a=[],c=0;c<h.length;c++)b={position:{x:t.touch_capable?l.changedTouches[c].screenX:n.screenX,y:t.touch_capable?l.changedTouches[c].screenY:n.screenY},offset:{x:t.touch_capable?Math.round(l.changedTouches[c].pageX-(r.offset()?r.offset().left:0)):Math.round(n.pageX-(r.offset()?r.offset().left:0)),y:t.touch_capable?Math.round(l.changedTouches[c].pageY-(r.offset()?r.offset().top:0)):Math.round(n.pageY-(r.offset()?r.offset().top:0))},time:Date.now(),target:n.target},a.push(b);i(f,"tap",n,a)}}}var f=this,r=n(f),e=!1,o=null,s,u={x:0,y:0},h;r.on(t.startevent,r.data.tapFunc1=c).on(t.endevent,r.data.tapFunc2=l)},remove:function(){n(this).off(t.startevent,n(this).data.tapFunc1).off(t.endevent,n(this).data.tapFunc2)}},n.event.special.swipe={setup:function(){function h(o){if(o.originalEvent){i=n(o.currentTarget);u.x=o.originalEvent.targetTouches?o.originalEvent.targetTouches[0].pageX:o.pageX;u.y=o.originalEvent.targetTouches?o.originalEvent.targetTouches[0].pageY:o.pageY;f.x=u.x;f.y=u.y;e=!0;var s=o.originalEvent;r={position:{x:t.touch_capable?s.touches[0].screenX:o.screenX,y:t.touch_capable?s.touches[0].screenY:o.screenY},offset:{x:t.touch_capable?Math.round(s.changedTouches[0].pageX-(i.offset()?i.offset().left:0)):Math.round(o.pageX-(i.offset()?i.offset().left:0)),y:t.touch_capable?Math.round(s.changedTouches[0].pageY-(i.offset()?i.offset().top:0)):Math.round(o.pageY-(i.offset()?i.offset().top:0))},time:Date.now(),target:o.target}}}function c(s){if(s.originalEvent){i=n(s.currentTarget);f.x=s.originalEvent.targetTouches?s.originalEvent.targetTouches[0].pageX:s.pageX;f.y=s.originalEvent.targetTouches?s.originalEvent.targetTouches[0].pageY:s.pageY;var h,c=i.parent().data("xthreshold")?i.parent().data("xthreshold"):i.data("xthreshold"),l=i.parent().data("ythreshold")?i.parent().data("ythreshold"):i.data("ythreshold"),y=typeof c!="undefined"&&c!==!1&&parseInt(c)?parseInt(c):t.swipe_h_threshold,p=typeof l!="undefined"&&l!==!1&&parseInt(l)?parseInt(l):t.swipe_v_threshold;if(u.y>f.y&&u.y-f.y>p&&(h="swipeup"),u.x<f.x&&f.x-u.x>y&&(h="swiperight"),u.y<f.y&&f.y-u.y>p&&(h="swipedown"),u.x>f.x&&u.x-f.x>y&&(h="swipeleft"),h!=undefined&&e){u.x=0;u.y=0;f.x=0;f.y=0;e=!1;var a=s.originalEvent,v={position:{x:t.touch_capable?a.touches[0].screenX:s.screenX,y:t.touch_capable?a.touches[0].screenY:s.screenY},offset:{x:t.touch_capable?Math.round(a.changedTouches[0].pageX-(i.offset()?i.offset().left:0)):Math.round(s.pageX-(i.offset()?i.offset().left:0)),y:t.touch_capable?Math.round(a.changedTouches[0].pageY-(i.offset()?i.offset().top:0)):Math.round(s.pageY-(i.offset()?i.offset().top:0))},time:Date.now(),target:s.target},b=Math.abs(r.position.x-v.position.x),k=Math.abs(r.position.y-v.position.y),w={startEvnt:r,endEvnt:v,direction:h.replace("swipe",""),xAmount:b,yAmount:k,duration:v.time-r.time};o=!0;i.trigger("swipe",w).trigger(h,w)}}}function l(u){var s;if(u.originalEvent){if(i=n(u.currentTarget),s="",o){var h=i.data("xthreshold"),c=i.data("ythreshold"),a=typeof h!="undefined"&&h!==!1&&parseInt(h)?parseInt(h):t.swipe_h_threshold,v=typeof c!="undefined"&&c!==!1&&parseInt(c)?parseInt(c):t.swipe_v_threshold,l=u.originalEvent,f={position:{x:t.touch_capable?l.changedTouches[0].screenX:u.screenX,y:t.touch_capable?l.changedTouches[0].screenY:u.screenY},offset:{x:t.touch_capable?Math.round(l.changedTouches[0].pageX-(i.offset()?i.offset().left:0)):Math.round(u.pageX-(i.offset()?i.offset().left:0)),y:t.touch_capable?Math.round(l.changedTouches[0].pageY-(i.offset()?i.offset().top:0)):Math.round(u.pageY-(i.offset()?i.offset().top:0))},time:Date.now(),target:u.target};r.position.y>f.position.y&&r.position.y-f.position.y>v&&(s="swipeup");r.position.x<f.position.x&&f.position.x-r.position.x>a&&(s="swiperight");r.position.y<f.position.y&&f.position.y-r.position.y>v&&(s="swipedown");r.position.x>f.position.x&&r.position.x-f.position.x>a&&(s="swipeleft");var y=Math.abs(r.position.x-f.position.x),p=Math.abs(r.position.y-f.position.y),w={startEvnt:r,endEvnt:f,direction:s.replace("swipe",""),xAmount:y,yAmount:p,duration:f.time-r.time};i.trigger("swipeend",w)}e=!1;o=!1}}var s=this,i=n(s),e=!1,o=!1,u={x:0,y:0},f={x:0,y:0},r;i.on(t.startevent,i.data.touchStart=h);i.on(t.moveevent,i.data.touchMove=c);i.on(t.endevent,i.data.touchEnd=l)},remove:function(){n(this).off(t.startevent,n(this).data.touchStart).off(t.moveevent,n(this).data.touchMove).off(t.endevent,n(this).data.touchEnd)}},n.event.special.scrollstart={setup:function(){function o(n,t){r=t;i(u,r?"scrollstart":"scrollend",n)}function s(n){r||o(n,!0);clearTimeout(e);e=setTimeout(function(){o(n,!1)},50)}var u=this,f=n(u),r,e;f.on(t.scrollevent,f.data.scrollFunc=s)},remove:function(){n(this).off(t.scrollevent,n(this).data.scrollFunc)}},u=n(window),e={"0":!0,"180":!0},t.orientation_support){var y=window.innerWidth||u.width(),p=window.innerHeight||u.height();s=y>p&&y-p>50;h=e[window.orientation];(s&&h||!s&&!h)&&(e={"-90":!0,"90":!0})}n.event.special.orientationchange=d={setup:function(){if(t.orientation_support)return!1;o=f();u.on("throttledresize",c);return!0},teardown:function(){return t.orientation_support?!1:(u.off("throttledresize",c),!0)},add:function(n){var t=n.handler;n.handler=function(n){return n.orientation=f(),t.apply(this,arguments)}}};n.event.special.orientationchange.orientation=f=function(){var i=!0,n=document.documentElement;return i=t.orientation_support?e[window.orientation]:n&&n.clientWidth/n.clientHeight<1.1,i?"portrait":"landscape"};n.event.special.throttledresize={setup:function(){n(this).on("resize",b)},teardown:function(){n(this).off("resize",b)}};var w=250,b=function(){a=Date.now();v=a-k;v>=w?(k=a,n(this).trigger("throttledresize")):(l&&window.clearTimeout(l),l=window.setTimeout(c,w-v))},k=0,l,a,v;n.each({scrollend:"scrollstart",swipeup:"swipe",swiperight:"swipe",swipedown:"swipe",swipeleft:"swipe",swipeend:"swipe",tap2:"tap"},function(t,i){var r=function(){};n.event.special[t]={setup:function(){n(this).on(i,r)},teardown:function(){n(this).off(i,r)}}})})(jQuery),function(n){function i(n,t){if(!(n.originalEvent.touches.length>1)){n.preventDefault();var i=n.originalEvent.changedTouches[0],r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null);n.target.dispatchEvent(r)}}if(n.support.touch="ontouchend"in document,n.support.touch){var t=n.ui.mouse.prototype,u=t._mouseInit,f=t._mouseDestroy,r;t._touchStart=function(t){var u=this;(n(this.currentItem).css("top","-5px").css("left","5px"),!r&&u._mouseCapture(t.originalEvent.changedTouches[0]))&&(r=!0,u._touchMoved=!1,i(t,"mouseover"),i(t,"mousemove"),i(t,"mousedown"))};t._touchMove=function(t){r&&(t.touches[0].pageY<n(window).scrollTop()+50?window.scrollBy(0,-10):t.touches[0].pageY>n(window).scrollTop()+window.innerHeight-50&&window.scrollBy(0,10),this._touchMoved=!0,i(t,"mousemove"))};t._touchEnd=function(t){r&&(n(this.currentItem).css("top","initial").css("left","initial"),i(t,"mouseup"),i(t,"mouseout"),this._touchMoved||i(t,"click"),r=!1)};t._mouseInit=function(){var t=this;t.element.bind("taphold",n.proxy(t,"_touchStart")).bind("touchmove",n.proxy(t,"_touchMove")).bind("touchend",n.proxy(t,"_touchEnd"));u.call(t)};t._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:n.proxy(t,"_touchStart"),touchmove:n.proxy(t,"_touchMove"),touchend:n.proxy(t,"_touchEnd")});f.call(t)}}}(jQuery);